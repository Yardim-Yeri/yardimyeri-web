import{r as H,D,j as r,L as S,a as e,f as j,F as C,B as m,E as b}from"./index-404ae2fd.js";import{H as E}from"./Helmet-4d14e6a3.js";import{a as I,b as L,C as o,I as x,r as z,c as _}from"./inputPhone-ee80a33c.js";import{u as M}from"./index-fd876598.js";import{B as P}from"./index-f723f058.js";import{H as A,M as F}from"./index-3b2871e8.js";import{P as T}from"./index-aec199b7.js";import{a as O,b as $}from"./Help-62af70a8.js";import"./transition-e336658f.js";const X=()=>{var u,p,f;const[B,s]=H.useState(!1),{id:i}=D(),{control:n,formState:{errors:l},handleSubmit:N,reset:k}=I({mode:"onChange"}),d=L(a=>O(i,a),{onError:a=>{var h,g,y;b.error(`(${(h=a.response)==null?void 0:h.status}) ${(y=(g=a.response)==null?void 0:g.data)==null?void 0:y.message}`)},onSuccess:a=>{s(!1),a&&a.success&&b.success(a.message),k()}}),{data:t,isLoading:c}=M(["helpById",i],$),v=()=>{s(!0)},Y=a=>{switch(a){case"Yardım Bekliyor":return"error";case"Yardım Geliyor":return"info";case"Yardım Ulaştı":return"success";default:return"default"}},w=a=>{d.mutate(a)};return r(S,{children:[r(E,{children:[e("meta",{name:"twitter:card",content:"summary_large_image"}),e("meta",{name:"twitter:creator",content:"@yardimyericom"}),e("meta",{name:"twitter:title",content:"Yardımyeri.com"}),e("meta",{name:"twitter:description",content:"Yardımyeri.com - Deprem yardım."}),e("meta",{name:"twitter:image",content:`https://api_test.yardimyeri.com/images/${i}.png`})]}),(d.isLoading||c)&&e(j,{}),r("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-4 ",children:[e(T,{title:"Yardım Talebi Detayı"}),t&&e("div",{children:e(P,{label:t.status,type:Y(t.status)})})]}),!c&&t&&r(C,{children:[e(A,{data:t}),(t==null?void 0:t.status)==="Yardım Bekliyor"&&e("div",{className:"flex justify-center mt-6",children:e(m,{label:"Yardım Et",onClick:v})})]}),e(F,{title:"Yardım Başlatılacak!",isOpen:B,setIsOpen:s,children:r("div",{children:[e("p",{children:"Aşağıda bulunan bilgileri doldurduktan sonra yardımı başlatabilirsiniz."}),e("p",{className:"text-red-500",children:"Yardımı başlattığınız takdirde yardım talep edenin iletişim bilgilerine ulaşabilirsiniz."}),r("form",{className:"mt-5",onSubmit:N(w),children:[r("div",{className:"flex flex-col gap-6",children:[r("div",{children:[e(o,{name:"name",control:n,rules:{required:"Bu alan zorunludur."},render:({field:a})=>e(x,{...a,placeholder:"Adınız"})}),e("span",{className:"text-red-600 text-sm",children:(u=l.name)==null?void 0:u.message})]}),r("div",{children:[e(o,{name:"email",control:n,rules:{pattern:{value:z.email,message:"Doğru formatta bir mail giriniz."}},render:({field:a})=>e(x,{...a,placeholder:"E-Posta Adresiniz"})}),e("span",{className:"text-red-600 text-sm",children:(p=l.email)==null?void 0:p.message}),e("p",{className:"text-gray-500 text-sm",children:"Bu alan zorunlu değildir. Ancak e-posta adresinizi girdiğiniz takdirde yeni oluşan talepleri mail olarak sizlere bildiriyoruz."})]}),r("div",{children:[e(o,{name:"phone_number",control:n,rules:{required:"Bu alan zorunludur.",pattern:{value:z.phoneNumber,message:"Doğru formatta bir telefon numarası giriniz."}},render:({field:a})=>e(_,{...a})}),e("span",{className:"text-red-600 text-sm",children:(f=l.phone_number)==null?void 0:f.message}),e("p",{className:"text-gray-500 text-sm",children:"Lütfen numaranızı başında sıfır olmadan girin."})]})]}),r("div",{className:"mt-4 flex justify-end gap-3",children:[e(m,{label:"Vazgeç",type:"error",size:"small",onClick:()=>{s(!1)}}),e(m,{htmlType:"submit",label:"Yardımı Başlat",type:"success",size:"small"})]})]})]})})]})};export{X as default};
