import{r as H,z as S,j as r,a as e,F as C,A as f}from"./index-da7272ce.js";import{a as D,b as I,C as m,I as y,r as b,c as _}from"./constants-70bcd285.js";import{u as j}from"./index-d0a49b6a.js";import{H as w}from"./Helmet-1793f024.js";import{B as o}from"./transition-0aa4e1ef.js";import{L as A}from"./index-a0b56dd9.js";import{H as E,M}from"./HelpDetailContent-c9f25f3f.js";import{P}from"./index-816fcfe9.js";import{a as F,b as L}from"./help.service-55ae22f7.js";const R=()=>{var d,c,u;const[x,t]=H.useState(!1),{id:i}=S(),{control:n,formState:{errors:l},handleSubmit:z,reset:N}=D({mode:"onChange"}),B=I(a=>F(i,a),{onError:a=>{var p,h,g;f.error(`(${(p=a.response)==null?void 0:p.status}) ${(g=(h=a.response)==null?void 0:h.data)==null?void 0:g.message}`)},onSuccess:a=>{t(!1),a&&a.success&&f.success(a.message),N()}}),{data:s,isLoading:k}=j(["helpById",i],L),v=()=>{t(!0)},Y=a=>{B.mutate(a)};return r(A,{children:[r(w,{children:[e("meta",{name:"twitter:card",content:"summary_large_image"}),e("meta",{name:"twitter:creator",content:"@yardimyericom"}),e("meta",{name:"twitter:title",content:"Yardımyeri.com"}),e("meta",{name:"twitter:description",content:"Yardımyeri.com - Deprem yardım."}),e("meta",{name:"twitter:image",content:`https://api_test.yardimyeri.com/images/${i}.png`})]}),e(P,{title:"Yardım Talebi Detayı"}),!k&&r(C,{children:[e(E,{data:s}),(s==null?void 0:s.status)==="Yardım Bekliyor"&&e("div",{className:"flex justify-center mt-6",children:e(o,{label:"Yardım Et",onClick:v})})]}),e(M,{title:"Yardım Başlatılacak!",isOpen:x,setIsOpen:t,children:r("div",{children:[e("p",{children:"Aşağıda bulunan bilgileri doldurduktan sonra yardımı başlatabilirsiniz."}),e("p",{className:"text-red-500",children:"Yardımı başlattığınız takdirde yardım talep edenin iletişim bilgilerine ulaşabilirsiniz."}),r("form",{className:"mt-5",onSubmit:z(Y),children:[r("div",{className:"flex flex-col gap-6",children:[r("div",{children:[e(m,{name:"name",control:n,rules:{required:"Bu alan zorunludur."},render:({field:a})=>e(y,{...a,placeholder:"Adınız"})}),e("span",{className:"text-red-600 text-sm",children:(d=l.name)==null?void 0:d.message})]}),r("div",{children:[e(m,{name:"email",control:n,rules:{pattern:{value:b.email,message:"Doğru formatta bir mail giriniz."}},render:({field:a})=>e(y,{...a,placeholder:"E-Posta Adresiniz"})}),e("span",{className:"text-red-600 text-sm",children:(c=l.email)==null?void 0:c.message}),e("p",{className:"text-gray-500 text-sm",children:"Bu alan zorunlu değildir. Ancak e-posta adresinizi girdiğiniz takdirde yeni oluşan talepleri mail olarak sizlere bildiriyoruz."})]}),r("div",{children:[e(m,{name:"phone_number",control:n,rules:{required:"Bu alan zorunludur.",pattern:{value:b.phoneNumber,message:"Doğru formatta bir telefon numarası giriniz."}},render:({field:a})=>e(_,{...a})}),e("span",{className:"text-red-600 text-sm",children:(u=l.phone_number)==null?void 0:u.message}),e("p",{className:"text-gray-500 text-sm",children:"Lütfen numaranızı başında sıfır olmadan girin."})]})]}),r("div",{className:"mt-4 flex justify-end gap-3",children:[e(o,{label:"Vazgeç",type:"error",size:"small",onClick:()=>{t(!1)}}),e(o,{htmlType:"submit",label:"Yardımı Başlat",type:"success",size:"small"})]})]})]})})]})};export{R as default};
