import{r as D,D as S,C as $,j as r,L as j,a as e,f as E,F as I,B as d,E as b}from"./index-73880be6.js";import{H as L}from"./Helmet-7e7b9e3a.js";import{a as _,b as M,C as c,I as x,r as z,c as P}from"./inputPhone-771d3eed.js";import{u as A}from"./index-929cf050.js";import{B as F}from"./index-e252c3e9.js";import{H as T,M as O}from"./index-3f86946e.js";import{P as q}from"./index-48c9a4e4.js";import{a as G,b as Q}from"./Help-b9bf7422.js";import"./transition-0a2963d0.js";const ae=()=>{var h,f,g;const[v,s]=D.useState(!1),{id:i}=S(),B=$(),{control:m,formState:{errors:o},handleSubmit:N,reset:k}=_({mode:"onChange"}),{data:t,isLoading:u,refetch:Y}=A(["helpById",i],G),p=M(a=>Q(i,a),{onError:a=>{var n,l,y;b.error(`(${(n=a.response)==null?void 0:n.status}) ${(y=(l=a.response)==null?void 0:l.data)==null?void 0:y.message}`)},onSuccess:(a,n)=>{const l=btoa(`${i}?${n.phone_number}`);Y(),s(!1),a&&a.success&&(b.success(a.message),B(`/yardim?id=${l}`)),k()}}),w=()=>{s(!0)},H=a=>{switch(a){case"Yardım Bekliyor":return"error";case"Yardım Geliyor":return"info";case"Yardım Ulaştı":return"success";default:return"default"}},C=a=>{p.mutate(a)};return r(j,{children:[r(L,{children:[e("meta",{name:"twitter:card",content:"summary_large_image"}),e("meta",{name:"twitter:creator",content:"@yardimyericom"}),e("meta",{name:"twitter:title",content:"Yardımyeri.com"}),e("meta",{name:"twitter:description",content:"Yardımyeri.com - Deprem yardım."}),e("meta",{name:"twitter:image",content:`https://api.yardimyeri.com/api//images/${i}.png`})]}),(p.isLoading||u)&&e(E,{}),r("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-4 ",children:[e(q,{title:"Yardım Talebi Detayı"}),t&&e("div",{children:e(F,{label:t.status,type:H(t.status)})})]}),!u&&t&&r(I,{children:[e(T,{data:t}),(t==null?void 0:t.status)==="Yardım Bekliyor"&&e("div",{className:"flex justify-center mt-6",children:e(d,{label:"Yardım Et",onClick:w})})]}),e(O,{title:"Yardım Başlatılacak!",isOpen:v,setIsOpen:s,children:r("div",{children:[e("p",{children:"Aşağıda bulunan bilgileri doldurduktan sonra yardımı başlatabilirsiniz."}),e("p",{className:"text-red-500",children:"Yardımı başlattığınız takdirde yardım talep edenin iletişim bilgilerine ulaşabilirsiniz."}),r("form",{className:"mt-5",onSubmit:N(C),children:[r("div",{className:"flex flex-col gap-6",children:[r("div",{children:[e(c,{name:"name",control:m,rules:{required:"Bu alan zorunludur."},render:({field:a})=>e(x,{...a,placeholder:"Adınız"})}),e("span",{className:"text-red-600 text-sm",children:(h=o.name)==null?void 0:h.message})]}),r("div",{children:[e(c,{name:"email",control:m,rules:{pattern:{value:z.email,message:"Doğru formatta bir mail giriniz."}},render:({field:a})=>e(x,{...a,placeholder:"E-Posta Adresiniz"})}),e("span",{className:"text-red-600 text-sm",children:(f=o.email)==null?void 0:f.message}),e("p",{className:"text-gray-500 text-sm",children:"Bu alan zorunlu değildir. Ancak e-posta adresinizi girdiğiniz takdirde yeni oluşan talepleri mail olarak sizlere bildiriyoruz."})]}),r("div",{children:[e(c,{name:"phone_number",control:m,rules:{required:"Bu alan zorunludur.",pattern:{value:z.phoneNumber,message:"Doğru formatta bir telefon numarası giriniz."}},render:({field:a})=>e(P,{...a})}),e("span",{className:"text-red-600 text-sm",children:(g=o.phone_number)==null?void 0:g.message}),e("p",{className:"text-gray-500 text-sm",children:"Lütfen numaranızı başında sıfır olmadan girin."})]})]}),r("div",{className:"mt-4 flex justify-end gap-3",children:[e(d,{label:"Vazgeç",type:"error",size:"small",onClick:()=>{s(!1)}}),e(d,{htmlType:"submit",label:"Yardımı Başlat",type:"success",size:"small"})]})]})]})})]})};export{ae as default};
